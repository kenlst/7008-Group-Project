---
config:
  layout: dagre
  theme: mc
---
classDiagram
    class QuestionBankSystem {
        +uploadQuestionBank(file)
        +generateSurvey(requirements)
        +analyzeResults(surveyData)
    }
    
    class QuestionBank {
        -String bankId
        -String category
        -List~Question~ questions
        +addQuestion(question)
        +getQuestionsByCategory(category)
        +getRandomQuestions(count)
    }
    
    class Question {
        -String questionId
        -String text
        -String type
        -List~String~ options
        -String category
        -int difficulty
        -String language
        -String sourceUrl
        -String sourceName
    }
    
    class WebCrawler {
        -Session session
        -List~Question~ allQuestions
        -Set seenQuestions
        -Set seenUrls
        -Dict stats
        -String dataDir
        +init_database()
        +safe_get(url, timeout)
        +is_travel_question(text)
        +extract_options(options_list)
        +determine_question_type(options_text, question_text)
        +categorize_question(text)
        +parse_wjx(html, url)
        +parse_wenjuan(html, url)
        +parse_jotform(html, url)
        +parse_generic(html, url, source_name)
        +parse_survey_page(html, url, source_name)
        +extract_sublinks(html, base_url)
        +crawl_with_fallback(url, source_name)
        +get_all_urls()
        +crawl_all()
        +enhance_options()
        +expand_to_6000()
        +save_all()
        +show_stats()
    }
    
    class TextMiningModel {
        +categorizeQuestions(questions)
        +extractKeywords(text)
        +analyzeRequirements(requirements)
    }
    
    class SurveyGenerator {
        -SurveyRequirement requirements
        +generateQuestions(questionBank, requirements)
        +selectByDifficulty(difficulty)
        +selectByCategory(categories)
    }
    
    class SurveyRequirement {
        -int questionCount
        -List~String~ categories
        -int targetDifficulty
        -String audience
    }
    
    class DataVisualizer {
        -Dict chartTemplates
        +createClusterVisualization(clusterData)
        +createCategoryDistributionChart(categoryData)
        +createComplexityAnalysisChart(complexityData)
        +createPlatformComparisonChart(platformData)
        +createSurveyProgressDashboard(surveyData)
        +createQuestionRelationshipGraph(relationshipData)
        +createUserAnalysisReport(userData)
        +createAllUsersAnalysisReport(systemData)
        +exportAllVisualizations(systemData)
    }
    
    QuestionBankSystem --> QuestionBank : manages
    QuestionBankSystem --> WebCrawler : uses
    QuestionBankSystem --> TextMiningModel : uses
    QuestionBankSystem --> SurveyGenerator : uses
    QuestionBankSystem --> DataVisualizer : uses
    
    QuestionBank "1" --> "*" Question : contains
    WebCrawler --> QuestionBank : populates
    TextMiningModel --> Question : analyzes
    SurveyGenerator --> QuestionBank : selects from
    SurveyGenerator --> SurveyRequirement : follows
    DataVisualizer --> SurveyGenerator : visualizes output
    DataVisualizer --> Question : analyzes patterns
